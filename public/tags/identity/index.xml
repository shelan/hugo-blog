<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Identity on My blog is awesome</title>
    <link>http://localhost:1313/tags/identity/</link>
    <description>Recent content in Identity on My blog is awesome</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>fr-FR</language>
    <copyright>All rights reserved - 2015</copyright>
    <lastBuildDate>Thu, 18 Jul 2013 09:45:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/identity/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>How to get a user profile for OAuth Token using JWT headers</title>
      <link>http://localhost:1313/post/how-to-get-a-user-profile-for-oauth-token-using-jwt-headers/</link>
      <pubDate>Thu, 18 Jul 2013 09:45:00 +0000</pubDate>
      
      <guid>http://localhost:1313/post/how-to-get-a-user-profile-for-oauth-token-using-jwt-headers/</guid>
      <description>&lt;div dir=&#34;ltr&#34; style=&#34;text-align: left;&#34; trbidi=&#34;on&#34;&gt;&lt;span id=&#34;docs-internal-guid-303339eb-f296-f7f6-1b88-261a9c9bb1ba&#34;&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir=&#34;ltr&#34; style=&#34;font-size: 15px; line-height: 17px; margin-bottom: 0pt; margin-top: 0pt; white-space: pre-wrap;&#34;&gt;&lt;span style=&#34;font-family: Arial;&#34;&gt;In this blog post lets discuss how you can retrieve user profile and view attributes of a user using only the OAuth token in WSO2 Identity server. I assume that reader is familiar with WSO2 identity server and if you need more help you can follow the documentation at &lt;/span&gt;&lt;a href=&#34;http://docs.wso2.org/wiki/display/IS400/WSO2+Identity+Server+Documentation&#34;&gt;http://docs.wso2.org/wiki/display/IS400/WSO2+Identity+Server+Documentation&lt;/a&gt;&lt;/div&gt;&lt;div dir=&#34;ltr&#34; style=&#34;font-size: 15px; line-height: 17px; margin-bottom: 0pt; margin-top: 0pt; white-space: pre-wrap;&#34;&gt;&lt;span style=&#34;font-family: Arial;&#34;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir=&#34;ltr&#34; style=&#34;margin-bottom: 0pt; margin-top: 0pt;&#34;&gt;&lt;span style=&#34;font-family: Arial; font-size: 15px; line-height: 17px; white-space: pre-wrap;&#34;&gt;1) &lt;/span&gt;&lt;span style=&#34;font-family: Arial; font-size: 15px; line-height: 17px; white-space: pre-wrap;&#34;&gt;Change the CARBON_HOME/repository/conf/identity.xml and make following attribute true. Then start the WSO2 Identity server.&lt;/span&gt;&lt;/div&gt;&lt;div dir=&#34;ltr&#34; style=&#34;margin-bottom: 0pt; margin-top: 0pt;&#34;&gt;&lt;span style=&#34;font-family: Arial;&#34;&gt;&lt;span style=&#34;font-size: 15px; line-height: 17px; white-space: pre-wrap;&#34;&gt;&lt;pre&gt;&lt;code&gt;&lt;br /&gt;   &amp;lt;AuthorizationContextTokenGeneration&amp;gt;&lt;br /&gt;                        &lt;span style=&#34;background-color: yellow;&#34;&gt;&amp;lt;Enabled&amp;gt;true&amp;lt;/Enabled&amp;gt;&lt;/span&gt;&lt;br /&gt;                        &amp;lt;TokenGeneratorImplClass&amp;gt;org.wso2.carbon.identity.oauth2.authcontext.JWTTokenGenerator&amp;lt;/TokenGeneratorImplClass&amp;gt;&lt;br /&gt;                        &amp;lt;ClaimsRetrieverImplClass&amp;gt;org.wso2.carbon.identity.oauth2.authcontext.DefaultClaimsRetriever&amp;lt;/ClaimsRetrieverImplClass&amp;gt;&lt;br /&gt;                        &amp;lt;ConsumerDialectURI&amp;gt;http://wso2.org/claims&amp;lt;/ConsumerDialectURI&amp;gt;&lt;br /&gt;                        &amp;lt;SignatureAlgorithm&amp;gt;SHA256withRSA&amp;lt;/SignatureAlgorithm&amp;gt;&lt;br /&gt;                        &amp;lt;AuthorizationContextTTL&amp;gt;15&amp;lt;/AuthorizationContextTTL&amp;gt;&lt;br /&gt;                &amp;lt;/AuthorizationContextTokenGeneration&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir=&#34;ltr&#34; style=&#34;margin-bottom: 0pt; margin-top: 0pt;&#34;&gt;&lt;span style=&#34;font-family: Arial;&#34;&gt;&lt;span style=&#34;font-size: 15px; line-height: 17px; white-space: pre-wrap;&#34;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir=&#34;ltr&#34; style=&#34;margin-bottom: 0pt; margin-top: 0pt;&#34;&gt;&lt;span style=&#34;font-family: Arial;&#34;&gt;&lt;span style=&#34;font-size: 15px; line-height: 17px; white-space: pre-wrap;&#34;&gt;2) Get the oauth Token ( you need to get the base64 encoded value for (client id:client secret) value.&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;span style=&#34;font-family: Arial;&#34;&gt;&lt;span style=&#34;font-size: 15px; line-height: 17px; white-space: pre-wrap;&#34;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: center;&#34;&gt;&lt;a href=&#34;http://4.bp.blogspot.com/-qgT8Mb3VI6c/UegaNml8a1I/AAAAAAAAB4Q/1Ujduv3UJ3A/s1600/oauth-secrets.png&#34; imageanchor=&#34;1&#34; style=&#34;margin-left: 1em; margin-right: 1em;&#34;&gt;&lt;img border=&#34;0&#34; height=&#34;401&#34; src=&#34;http://4.bp.blogspot.com/-qgT8Mb3VI6c/UegaNml8a1I/AAAAAAAAB4Q/1Ujduv3UJ3A/s640/oauth-secrets.png&#34; width=&#34;640&#34; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;span style=&#34;font-family: Arial;&#34;&gt;&lt;span style=&#34;font-size: 15px; line-height: 17px; white-space: pre-wrap;&#34;&gt; You can use an online service for encoding such as http://www.base64encode.org/  and then issue following CURL command to obtain the access token. (make sure you have the correct port in the server URL) &lt;pre&gt;&lt;code&gt;&lt;br /&gt;curl -v -X POST -H &#34;Authorization: Basic VE01enNFem9FZG9NRERjVEJjbXRBcWJGdTBFYTpYUU9URExINlBBOHJvUHJfSktrTHhUSTNseGNh&#34; -H &#34;Content-Type: application/x-www-form-urlencoded;charset=UTF-8&#34; -k -d &#34;grant_type=password&amp;amp;username=admin&amp;amp;password=admin&#34; https://localhost:9443/oauth2endpoints/token&lt;/code&gt;&lt;/pre&gt;&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;&lt;span style=&#34;font-family: Arial;&#34;&gt;&lt;span style=&#34;font-size: 15px; line-height: 17px; white-space: pre-wrap;&#34;&gt;&lt;code&gt;&lt;br /&gt;&lt;/code&gt;&amp;nbsp;3)  Now you need to invoke and admin service in the Identity server. Please follow &lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;a href=&#34;http://charithaka.blogspot.com/2013/06/invoking-wso2-carbon-admin-services.html&#34;&gt;http://charithaka.blogspot.com/2013/06/invoking-wso2-carbon-admin-services.html&lt;/a&gt;&amp;nbsp;on how to invoke admin services using SOAP UI.&lt;br /&gt;&lt;br /&gt;We shall now invoke the following service.&lt;br /&gt;&lt;b id=&#34;docs-internal-guid-303339eb-f2a4-0a03-ae04-2c05a8d65a0b&#34; style=&#34;font-weight: normal;&#34;&gt;&lt;a href=&#34;https://localhost:9443/services/OAuth2TokenValidationService&#34; style=&#34;text-decoration: none;&#34;&gt;&lt;span style=&#34;color: #1155cc; font-family: Arial; font-size: 15px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;&#34;&gt;https://localhost:9443/services/OAuth2TokenValidationService&lt;/span&gt;&lt;/a&gt;&lt;span style=&#34;font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;&#34;&gt; &lt;/span&gt;&lt;/b&gt;&lt;br /&gt;&lt;b style=&#34;font-weight: normal;&#34;&gt;&lt;span style=&#34;font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;&#34;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/b&gt;&lt;b style=&#34;font-weight: normal;&#34;&gt;&lt;span style=&#34;font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;&#34;&gt;Request&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&#34;font-family: Arial;&#34;&gt;&lt;span style=&#34;font-size: 15px; line-height: 17px; white-space: pre-wrap;&#34;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: center;&#34;&gt;&lt;a href=&#34;http://2.bp.blogspot.com/-jAcoq-QpVi4/UegaYJATVQI/AAAAAAAAB4Y/i2DCVjg-pTg/s1600/request.png&#34; imageanchor=&#34;1&#34; style=&#34;margin-left: 1em; margin-right: 1em;&#34;&gt;&lt;img border=&#34;0&#34; height=&#34;414&#34; src=&#34;http://2.bp.blogspot.com/-jAcoq-QpVi4/UegaYJATVQI/AAAAAAAAB4Y/i2DCVjg-pTg/s640/request.png&#34; width=&#34;640&#34; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;&lt;div&gt;&lt;br /&gt;Response&lt;br /&gt;&lt;br /&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: center;&#34;&gt;&lt;a href=&#34;http://4.bp.blogspot.com/-0yUSY1daims/UegaiIs7cUI/AAAAAAAAB4g/bFBfYIQY3c0/s1600/response.png&#34; imageanchor=&#34;1&#34; style=&#34;margin-left: 1em; margin-right: 1em;&#34;&gt;&lt;img border=&#34;0&#34; height=&#34;270&#34; src=&#34;http://4.bp.blogspot.com/-0yUSY1daims/UegaiIs7cUI/AAAAAAAAB4g/bFBfYIQY3c0/s640/response.png&#34; width=&#34;640&#34; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: center;&#34;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: left;&#34;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: left;&#34;&gt;Now you will be getting the authorization context token which is encoded in base64 and delimited with &#34;.&#34; values. Middle part will contain the user profile value and we can get it decoded using&amp;nbsp;&lt;a href=&#34;http://www.base64decode.org/&#34;&gt;http://www.base64decode.org/&lt;/a&gt;&lt;/div&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: left;&#34;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: left;&#34;&gt;&lt;/div&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both;&#34;&gt;&amp;lt;ax2303:tokenString&amp;gt;eyJ0eXAiOiJKV1QiLCJhbGciOiJTSEEyNTZ3aXRoUlNBIiwieDV0IjoiTm1KbU9HVXhNelpsWWpNMlpEUmhOVFpsWVRBMVl6ZGhaVFJpT1dFME5XSTJNMkptT1RjMVpBPT0ifQ==.&lt;span style=&#34;background-color: yellow;&#34;&gt;eyJpc3MiOiJodHRwOi8vd3NvMi5vcmcvZ2F0ZXdheSIsImV4cCI6MTM3NDE2NDYzMDE4MiwiaHR0cDovL3dzbzIub3JnL2dhdGV3YXkvc3Vic2NyaWJlciI6ImFkbWluIiwiaHR0cDovL3dzbzIub3JnL2dhdGV3YXkvYXBwbGljYXRpb25uYW1lIjoiTXlBcHBsaWNhdGlvbiIsImh0dHA6Ly93c28yLm9yZy9nYXRld2F5L2VuZHVzZXIiOiJhZG1pbiIsICJodHRwOi8vd3NvMi5vcmcvY2xhaW1zL2FjY291bnRMb2NrIjoiZmFsc2UiLCAiaHR0cDovL3dzbzIub3JnL2NsYWltcy9jaGFsbGVuZ2VRdWVzdGlvbjEiOiIxMjM0NDUiLCAiaHR0cDovL3dzbzIub3JnL2NsYWltcy9jaGFsbGVuZ2VRdWVzdGlvbjIiOiI0NTY3NTYiLCAiaHR0cDovL3dzbzIub3JnL2NsYWltcy9jaGFsbGVuZ2VRdWVzdGlvblVyaXMiOiJteVRva2VuMiIsICJodHRwOi8vd3NvMi5vcmcvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImFkbWluQHdzbzIuY29tIiwgImh0dHA6Ly93c28yLm9yZy9jbGFpbXMvZnVsbG5hbWUiOiJhZG1pbiIsICJodHRwOi8vd3NvMi5vcmcvY2xhaW1zL2dpdmVubmFtZSI6ImFkbWluIiwgImh0dHA6Ly93c28yLm9yZy9jbGFpbXMvbGFzdG5hbWUiOiJhZG1pbiIsICJodHRwOi8vd3NvMi5vcmcvY2xhaW1zL3JvbGUiOiJhZG1pbixldmVyeW9uZSJ9&lt;/span&gt;.IUpGsH149iJDcn/UWYdGBrAoTNOZiUdI3X7QMXqVt+ss5rOOlDeB5bgz0Q3Y4SKh+H4PBkvlLd0/WAlbuvTi9Zj/G/QupenQpqYKulOFihUMNHiWRUgFT5BvfATVMsvqO/023BFprhdDShuPlpI9pJAEeuvmUiRIBPVVeoj09Ec=&amp;lt;/ax2303:tokenString&amp;gt;&lt;/div&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both;&#34;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;lt;ax2303:tokenType&amp;gt;JWT&amp;lt;/ax2303:tokenType&amp;gt;&lt;/div&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both;&#34;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both;&#34;&gt;Following is the output of the decoded value which has the user profile details of the user who generated the OAuth access token.&lt;/div&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both;&#34;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: center;&#34;&gt;&lt;a href=&#34;http://4.bp.blogspot.com/-qB4ok8OLexs/UegbbUGsnwI/AAAAAAAAB4s/4QI44F86e0g/s1600/decoded-userprof.png&#34; imageanchor=&#34;1&#34; style=&#34;margin-left: 1em; margin-right: 1em;&#34;&gt;&lt;img border=&#34;0&#34; height=&#34;554&#34; src=&#34;http://4.bp.blogspot.com/-qB4ok8OLexs/UegbbUGsnwI/AAAAAAAAB4s/4QI44F86e0g/s640/decoded-userprof.png&#34; width=&#34;640&#34; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both;&#34;&gt;&lt;br /&gt;&lt;/div&gt;&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>